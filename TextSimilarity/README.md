
# 软件简介

这是一个计算文本相似度的应用程序。
它从命令行接受三个路径的参数，第1个参数表示原文文本文件路径，第2个参数表示被测试重复率的文本文件路径，第3个参数表示比较结果保存的文件路径。
**注意：** 只能接受**纯文本**文件 来计算文本相似度！！。

可以在IDE上运行源代码体验程序。也可以直接使用jar包体验程序。两种方式各有优劣(jar包已经打包好了依赖)。
**因为不明的第三方工具的原因，JAR包程序运行耗时时源玛运行的200倍左右！！！**

其他信息请见下文！

# 编译测试须知
# JDK版本
JDK版本为1.8，我所用jdk版本的是jdk8u261。如有运行问题，可以尝试切换jdk版本
# 依赖问题
+ 源码依赖IKAnalyzer2012_FF.jar :分词所用工具，目录lib/IK-Analyzer-2012FF/dist有其jar文件
+ jar包已经将依赖导入包内，运行jar包不需要关注依赖问题
# 运行时间大差异问题！！！
经过测试：
+ 在eclipse直接运行程序，8000字符左右约耗时间250毫秒，其中分词只耗时月25毫秒，相似度算法耗时约**225毫秒**。
+ **但是运行JAR包时候分词耗时约8000毫秒**，，相似度算法仍然约耗时**225毫秒**。
+ 故测试时请注意区分算法耗时和程序耗时。**不应该**把第三方工具消费的时间算到**计算时与该工具无关**的算法。

# JAR包
所有打包的JAR包都位于release目录
## 正式版本
+ TextSimilarity_v1.0.jar
## 微调版本
微调版本是测试jar包，以及少量修正代码所产生。部分功能可能与预期有所偏差。
请不要使用微调版本
+ TextSimilarity_v0.9.jar
+ TextSimilarity_v0.8.jar
+ TextSimilarity_v0.7.jar
+ TextSimilarity_v0.6.jar
+ TextSimilarity_v0.5.jar
+ TextSimilarity_v0.4.jar
+ TextSimilarity_v0.3.jar
+ TextSimilarity_v0.2.jar
+ TextSimilarity_v0.1.jar


# 源代码简介
## 包简介
+ 顶级包名：mortal.text.similarity。包含一个子包和一个程序族类
+ 子包：repeatcounter。  包含两个类，用来计算相似度

## 类简介
+ mortal.text.similarity.TextSimilarityApp
	+ 功能：文本相似度计算程序的主类，入口类
	+ 参数：从命令行接受3个合理的文件路径，依次为：原文文件路径，被测试重复率文件路径，答案保存文件路径
	+ 注意：
		1. 前两个命令行参数所指路径必须真实存在，否则抛出异常
		2. 答案文件可以不存在，此时程序将自动创建文件，请确保路径合理，应用程序有创建文件的权限。	
		3. 若答案文件存在且保存了重要信息，请备份！否则程序输出答案前会删除文件
+ mortal.text.similarity.repeatcounter.RepeatWords
	+ 功能：比较一对字符串数组的相似度，它基于以下规则进行比较
		1. 字符串数组的每个元素(即字符串)表示一个词语
		2. 字符串数组表示一个句子中去掉标点符号后分词的结果的数组
		3. 一对字符串数组之间只有必须超过指定数目的公共重复词语子数组，才会被记录为重复的词语
		4. 对于一对字符串数组A、B，所得的重复词语子数组，存在不同子数组在不同字符串中有不尽相同的部分词语重复。故对于每一个字符串数组，重复词语数量不是所有词语子数组的简单相加，而是在以该字符串数组为参考，去掉重复的词语后的数量。故A对B的重复词语数与B对A的重复词语不一定相等。（A对B是指以A为参考，去掉重复词语）
	+ 功能控制：构造器接受两个字符串数组和一个int参数，int参数指示了开始计数为重复时的最少重复词语子数组长度。
+ mortal.textsimilarity.repeatcounter.RepeatRate
	+ 功能：
		1. 接受两个字符串，这两个字符串包含要对比的两文本。
		2. 使用正则将文本划分为句子。
		3. 使用分词工具将句子分词
		4. 调用RepeatWords对对句子进行比较，获取这对句子中的重复词语数量
	+ 功能控制：
		1. RepeatRate.calculater是进行第4步工作，这个方法接受两参数
		2. int Range: 控制一个文本中某一位置的句子应该与 在另一个文本中的相同位置的前后各相差Range个句子的范围内的所有句子  都计算重复率， 然后取最大值，作为该文本句子中与另一文本相似词语的数量
		3. int min : 传递给RepeatWords构造器的参数，指示RepeatWords应该计算重复词语的阈值。
+ mortal.text.similarity.repeatcounter.KMP
	+ 功能：实现KMP算法匹配子串，用来实现获取文本中的不重复的相似词语。
	+ 注意：该类是暂时未必使用，还没有实现获取文本中的不重复的相似词语的功能。预计在下一个版本中完成这个功能。

